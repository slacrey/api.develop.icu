# 国内+全球 天气预报 （支持多语言）

> 支持国内和全球的天气预报接口



### 接口参数

请求地址：`/api/weather/{Type}`

请求方式：`get`  `post`

`Type` 参数说明：

| `Type`  值 | 描述       |
| ---------- | ---------- |
| `now`      | 实况天气   |
| `forecast` | 7 天 预报  |
| `hourly`   | 逐小时预报 |
| `life`     | 生活指数   |
| `find`     | 城市搜索   |

请求参数：

| 参数名称   | 必选 | 类型     | 说明                 |
| ---------- | ---- | -------- | -------------------- |
| `location` | 是   | `string` | 要查询的城市或者地区 |
| `lang`     | 否   | `string` | 返回的语言,默认 `zh` |

`location` 支持：

1. 城市ID：城市列表
2. 经纬度格式：经度,纬度（经度在前纬度在后，英文,分隔，十进制格式，北纬东经为正，南纬西经为负
3. 城市名称，支持中英文和汉语拼音
4. 城市名称，上级城市 或 省 或 国家，英文,分隔，此方式可以在重名的情况下只获取想要的地区的天气数据，例如 西安,陕西
5. `IP`

`lang` 支持：

| 语言代码  | 语言名称 |
| --------- | -------- |
| `zh`      | 简体中文 |
| `zh-hant` | 繁体中文 |
|`en`|英文|
|`de`|德语|
|`es`|西班牙语|
|`fr`|法语|
|`ja`|日语|
|`ko`|韩语|
|`sv`|瑞典语|


### 返回数据

**实况天气** 

 测试参数：`/api/weather/now?location=北京`

```json
{
    "code": 200,
    "msg": "success",
    "data": {
        "basic": {
            "cid": "CN101010100",
            "location": "北京",
            "parent_city": "北京",
            "admin_area": "北京",
            "cnty": "中国",
            "lat": "39.90498734",
            "lon": "116.4052887",
            "tz": "+8.00"
        },
        "update": {
            "loc": "2019-10-07 08:36",
            "utc": "2019-10-07 00:36"
        },
        "status": "ok",
        "now": {
            "cloud": "10",
            "cond_code": "100",
            "cond_txt": "晴",
            "fl": "9",
            "hum": "94",
            "pcpn": "0.0",
            "pres": "1017",
            "tmp": "10",
            "vis": "15",
            "wind_deg": "267",
            "wind_dir": "西风",
            "wind_sc": "2",
            "wind_spd": "6"
        }
    },
    "Author": {
        "name": "Alone88",
        "desc": "由Alone88提供的免费API 服务，官方文档：www.alapi.cn"
    }
}
```

**城市搜索**

测试参数：`/api/weather/find?location=北京`

```json
{
    "code": 200,
    "msg": "success",
    "data": {
        "basic": [
            {
                "cid": "CN101010100",
                "location": "北京",
                "parent_city": "北京",
                "admin_area": "北京",
                "cnty": "中国",
                "lat": "39.90498734",
                "lon": "116.4052887",
                "tz": "+8.00",
                "type": "city"
            },
            {
                "cid": "CN10101010007A",
                "location": "北京孔庙",
                "parent_city": "北京",
                "admin_area": "北京",
                "cnty": "中国",
                "lat": "39.93999863",
                "lon": "116.41000366",
                "tz": "+8.00",
                "type": "scenic"
            },
            {
                "cid": "CN10101020006A",
                "location": "北京动物园",
                "parent_city": "北京",
                "admin_area": "北京",
                "cnty": "中国",
                "lat": "39.93000031",
                "lon": "116.33000183",
                "tz": "+8.00",
                "type": "scenic"
            },
            {
                "cid": "CN10101010011A",
                "location": "北京海洋馆",
                "parent_city": "北京",
                "admin_area": "北京",
                "cnty": "中国",
                "lat": "39.93999863",
                "lon": "116.33999634",
                "tz": "+8.00",
                "type": "scenic"
            },
            {
                "cid": "CN10101010006A",
                "location": "北京国子监",
                "parent_city": "北京",
                "admin_area": "北京",
                "cnty": "中国",
                "lat": "39.93999863",
                "lon": "116.41000366",
                "tz": "+8.00",
                "type": "scenic"
            },
            {
                "cid": "CN10101020007A",
                "location": "北京植物园",
                "parent_city": "北京",
                "admin_area": "北京",
                "cnty": "中国",
                "lat": "40.0",
                "lon": "116.19999695",
                "tz": "+8.00",
                "type": "scenic"
            },
            {
                "cid": "CN10101030004A",
                "location": "北京欢乐谷",
                "parent_city": "北京",
                "admin_area": "北京",
                "cnty": "中国",
                "lat": "39.86000061",
                "lon": "116.48999786",
                "tz": "+8.00",
                "type": "scenic"
            },
            {
                "cid": "CN10101110003A",
                "location": "北京野生动物园",
                "parent_city": "北京",
                "admin_area": "北京",
                "cnty": "中国",
                "lat": "39.49000168",
                "lon": "116.33000183",
                "tz": "+8.00",
                "type": "scenic"
            },
            {
                "cid": "CN10101020003A",
                "location": "北京天文馆",
                "parent_city": "北京",
                "admin_area": "北京",
                "cnty": "中国",
                "lat": "39.93000031",
                "lon": "116.33000183",
                "tz": "+8.00",
                "type": "scenic"
            },
            {
                "cid": "CN10101010002A",
                "location": "北京市规划展览馆",
                "parent_city": "北京",
                "admin_area": "北京",
                "cnty": "中国",
                "lat": "39.88999939",
                "lon": "116.40000153",
                "tz": "+8.00",
                "type": "scenic"
            }
        ],
        "status": "ok"
    },
    "Author": {
        "name": "Alone88",
        "desc": "由Alone88提供的免费API 服务，官方文档：www.alapi.cn"
    }
}
```



## 返回参数和数值说明

常规天气数据接口将返回一些基本字段和不同天气类型的字段。

返回的数据中，`basic`，`update`和`status`是基本参数，在不同数据类型中都会返回。

具体的天气数据，会根据你请求的`{type}`不同，将返回不同的天气数据。

### `basic` 基础信息

基础信息包括所查询的城市/地区的一些基本信息，例如名称、ID、经纬度等

| 参数        | 描述                     | 示例值      |
| :---------- | :----------------------- | :---------- |
| location    | 地区／城市名称           | 卓资        |
| cid         | 地区／城市ID             | CN101080402 |
| lat         | 地区／城市纬度           | 40.89576    |
| lon         | 地区／城市经度           | 112.577702  |
| parent_city | 该地区／城市的上级城市   | 乌兰察布    |
| admin_area  | 该地区／城市所属行政区域 | 内蒙古      |
| cnty        | 该地区／城市所属国家名称 | 中国        |
| tz          | 该地区／城市所在时区     | +8.0        |

### `update` 接口更新时间

接口更新时间为当前接口的更新时间，包括城市/地区所在地的当地时间和UTC时间，即使其中有个别数据没有变化，`update`时间也会变更。

| 参数 | 描述                                     | 示例值           |
| :--- | :--------------------------------------- | :--------------- |
| loc  | 当地时间，24小时制，格式yyyy-MM-dd HH:mm | 2017-10-25 12:34 |
| utc  | UTC时间，24小时制，格式yyyy-MM-dd HH:mm  | 2017-10-25 04:34 |

### `now`实况天气

实况天气即为当前时间点的天气状况以及温湿风压等气象指数，具体包含的数据：体感温度、实测温度、天气状况、风力、风速、风向、相对湿度、大气压强、降水量、能见度等。

| 参数      | 描述                       | 示例 |
| :-------- | :------------------------- | :--- |
| fl        | 体感温度，默认单位：摄氏度 | 23   |
| tmp       | 温度，默认单位：摄氏度     | 21   |
| cond_code | 实况天气状况代码           | 100  |
| cond_txt  | 实况天气状况描述           | 晴   |
| wind_deg  | 风向360角度                | 305  |
| wind_dir  | 风向                       | 西北 |
| wind_sc   | 风力                       | 3-4  |
| wind_spd  | 风速，公里/小时            | 15   |
| hum       | 相对湿度                   | 40   |
| pcpn      | 降水量                     | 0    |
| pres      | 大气压强                   | 1020 |
| vis       | 能见度，默认单位：公里     | 10   |
| cloud     | 云量                       | 23   |

### `daily_forecast` 天气预报

3-10天天气预报数据，天气预报包含的数据：日出日落、月升月落、最高最低温度、天气白天和夜间状况、风力、风速、风向、相对湿度、大气压强、降水量、降水概率、露点温度、紫外线强度、能见度等数据

| 参数        | 描述               | 示例值     |
| :---------- | :----------------- | :--------- |
| date        | 预报日期           | 2013-12-30 |
| sr          | 日出时间           | 07:36      |
| ss          | 日落时间           | 16:58      |
| mr          | 月升时间           | 04:47      |
| ms          | 月落时间           | 14:59      |
| tmp_max     | 最高温度           | 4          |
| tmp_min     | 最低温度           | -5         |
| cond_code_d | 白天天气状况代码   | 100        |
| cond_code_n | 夜间天气状况代码   | 100        |
| cond_txt_d  | 白天天气状况描述   | 晴         |
| cond_txt_n  | 晚间天气状况描述   | 晴         |
| wind_deg    | 风向360角度        | 310        |
| wind_dir    | 风向               | 西北风     |
| wind_sc     | 风力               | 1-2        |
| wind_spd    | 风速，公里/小时    | 14         |
| hum         | 相对湿度           | 37         |
| pcpn        | 降水量             | 0          |
| pop         | 降水概率           | 0          |
| pres        | 大气压强           | 1018       |
| uv_index    | 紫外线强度指数     | 3          |
| vis         | 能见度，单位：公里 | 10         |

### `hourly` 逐小时预报

未来24-168个小时，逐小时的天气预报数据数据，具体包含的数据：温度、天气状况、风力、风速、风向、相对湿度、大气压强、降水概率等。

|   参数    | 描述                           | 示例             |
| :-------: | :----------------------------- | :--------------- |
|   time    | 预报时间，格式yyyy-MM-dd hh:mm | 2013-12-30 13:00 |
|    tmp    | 温度                           | 2                |
| cond_code | 天气状况代码                   | 101              |
| cond_txt  | 天气状况描述                   | 多云             |
| wind_deg  | 风向360角度                    | 290              |
| wind_dir  | 风向                           | 西北             |
|  wind_sc  | 风力                           | 3-4              |
| wind_spd  | 风速，公里/小时                | 15               |
|    hum    | 相对湿度                       | 30               |
|   pres    | 大气压强                       | 1030             |
|    pop    | 降水概率，百分比               | 30               |
|    dew    | 露点温度                       | 12               |
|   cloud   | 云量                           | 23               |

### `lifestyle` 生活指数

生活指数和生活指数预报包括：穿衣、洗车、感冒、紫外线、运动、舒适度、旅游、空气污染扩散条件。

> 目前生活指数仅支持中国地区

| 参数 |                             描述                             |
| :--- | :----------------------------------------------------------: |
| brf  |                         生活指数简介                         |
| txt  |                       生活指数详细描述                       |
| type | 生活指数类型 `comf`：舒适度指数、`cw`：洗车指数、`drsg`：穿衣指数、`flu`：感冒指数、`sport`：运动指数、`trav`：旅游指数、`uv`：紫外线指数、`air`：空气污染扩散条件指数、`ac`：空调开启指数、`ag`：过敏指数、`gl`：太阳镜指数、`mu`：化妆指数、`airc`：晾晒指数、`ptfc`：交通指数、`fsh`：钓鱼指数、`spi`：防晒指数 |

